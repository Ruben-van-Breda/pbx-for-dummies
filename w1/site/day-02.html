<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Week 1 ‚Äî Day 2: Telephony 101 ‚Äî From Analog to Digital</title>
  <link rel="stylesheet" href="./site.css" />
</head>
<body>
  <main class="lesson">
    <header>
      <nav class="nav-top">
        <a href="./day-01.html">‚Üê Previous</a>
        <a href="./index.html">Back to Week 1</a>
        <a href="./day-03.html">Next ‚Üí</a>
      </nav>
      <h1>Day 2 ‚Äî Telephony 101: From Analog to Digital</h1>
    </header>
    <section class="content">
      <h2>Objectives</h2>
      <ul>
        <li>Understand analog vs digital lines and signaling</li>
        <li>Learn FXS/FXO, T1/E1, and trunking</li>
        <li>Distinguish call setup from media transport</li>
      </ul>

      <h2>Key Concepts (Explained)</h2>
      <ul>
        <li><strong>FXS (Foreign eXchange Station)</strong>: Port that delivers analog line to a phone (provides battery and dial tone).</li>
        <li><strong>FXO (Foreign eXchange Office)</strong>: Port that connects a device to the PSTN or FXS port (receives battery and dial tone).</li>
        <li><strong>T1/E1 (Digital trunks)</strong>: Bundles of digital channels (T1=24 ch in NA; E1=32 ch in EU), used before SIP trunks became common.</li>
        <li><strong>Trunk</strong>: A high-capacity link carrying multiple calls between systems.</li>
        <li><strong>Call setup vs transport</strong>: Setup is signaling (e.g., SIP/ISDN); transport is voice frames (e.g., RTP/TDM).</li>
      </ul>

      <video controls src="../../resources/Telephony__Analog_to_Digital.mp4" title="Analog to Digital"></video>

      <h2>Details: FXS/FXO, PRI (T1/E1), and Analog‚ÜîIP Gateways</h2>

      <h3>FXS vs FXO (Analog Interfaces)</h3>
      <p><strong>What it is and why it matters</strong>: FXS provides battery and dial tone to analog phones; FXO receives that service to connect devices toward the PSTN. Choosing the correct side avoids wiring errors and no-dial-tone issues.</p>
      <p><strong>Key details:</strong></p>
      <ul>
        <li>FXS ‚Üí Phone/ATA; FXO ‚Üí PSTN/FXS.</li>
        <li>Ring voltage, polarity, and impedance vary by region; verify device specs.</li>
        <li>Caller ID delivery methods (FSK/DTMF) and timing differ by country; align with gateways.</li>
      </ul>
      <p><strong>Checklist:</strong> Identify the power-supplying side; match regional signaling; test ring cadence and caller ID.</p>
      <p><strong>References:</strong> <a href="https://www.voip-info.org/fxs-fxo/" target="_blank" rel="noopener noreferrer">FXS/FXO ‚Äî VoIP-Info.org</a></p>

      <h3>PRI over T1/E1</h3>
      <p><strong>What it is and why it matters</strong>: PRI provided multi-channel digital trunks before SIP became ubiquitous. Understanding channelization and signaling helps with legacy migrations and troubleshooting.</p>
      <p><strong>Key details:</strong></p>
      <ul>
        <li>T1 PRI: 23B+1D (24 timeslots); E1 PRI: 30B+1D+1 framing slot (32 timeslots).</li>
        <li>Signaling: ISDN Q.931 on the D-channel; framing/line defined by G.704/G.703 (E1).</li>
        <li>Common gotchas: CRC/framing mismatches, clock slips, and profile differences (NI2 vs EuroISDN).</li>
      </ul>
      <p><strong>Checklist:</strong> Confirm framing/CRC/clocking, switch type, and channel map; test inbound/outbound call setup.</p>
      <p><strong>References:</strong> <a href="https://www.itu.int/rec/T-REC-Q.931" target="_blank" rel="noopener noreferrer">ITU‚ÄëT Q.931 (ISDN DSS1)</a>, <a href="https://www.itu.int/rec/T-REC-G.704" target="_blank" rel="noopener noreferrer">ITU‚ÄëT G.704</a>, <a href="https://www.itu.int/rec/T-REC-G.703" target="_blank" rel="noopener noreferrer">ITU‚ÄëT G.703</a>, <a href="https://wiki.asterisk.org/wiki/display/DAHDI/DAHDI+Telephony+Interfaces" target="_blank" rel="noopener noreferrer">Asterisk DAHDI/PRI Overview</a></p>

      <h3>Analog‚ÜîIP Gateways (ATAs and Media Gateways)</h3>
      <p><strong>What it is and why it matters</strong>: Gateways and ATAs bridge legacy analog phones/faxes, door phones, and alarms into IP PBXs. They enable phased migrations and preserve critical analog endpoints.</p>
      <p><strong>Key details:</strong></p>
      <ul>
        <li>ATA ports are FXS (to analog device); upstream SIP to PBX/ITSP.</li>
        <li>Fax: prefer T.38 when supported; otherwise G.711 pass-through with careful jitter/ptime.</li>
        <li>Dial-plan nuances: hook-flash, pulse-to-tone conversion, and caller ID timing.</li>
      </ul>
      <p><strong>Checklist:</strong> Map ports to extensions/DIDs; set codec policy (G.711 for fax); test hook-flash features and failover.</p>
      <p><strong>References:</strong> <a href="https://www.voip-info.org/ata/" target="_blank" rel="noopener noreferrer">Analog Telephone Adapter (ATA) ‚Äî VoIP-Info.org</a>, <a href="https://wiki.asterisk.org/wiki/display/AST/PJSIP+Configuration+Examples" target="_blank" rel="noopener noreferrer">Asterisk PJSIP Examples</a></p>

      <h2>Visual</h2>
      <pre><code>Analog phone ‚îÄ‚îÄ(FXS)‚îÄ‚îÄ PBX FXO card ‚îÄ‚îÄ PSTN

PBX ‚îÄ‚îÄ(T1/E1 PRI)‚îÄ‚îÄ Telco switch  (multiple voice channels)</code></pre>

      <h2>Modern Context</h2>
      <ul>
        <li>Many deployments replaced T1/E1 with SIP trunks over IP</li>
        <li>Gateways still exist to bridge legacy sites or analog endpoints to IP</li>
      </ul>

      <h2>Hands-on (10‚Äì15 min)</h2>
      <ol>
        <li>Watch a quick explainer on analog vs VoIP.</li>
        <li>Draw two mini-diagrams:
          <ul>
            <li>FXS‚ÜíPhone and FXO‚ÜíPSTN</li>
            <li>PBX‚ÜíPRI‚ÜíTelco</li>
          </ul>
        </li>
        <li>Note when you‚Äôd still need analog (fax lines, door phones, legacy alarms).</li>
      </ol>

      <h2>Quick Check (Self-test)</h2>
      <ul>
        <li>Which side provides battery and dial tone: FXS or FXO?</li>
        <li>How many channels in T1 vs E1?</li>
        <li>Why do some sites still keep a few analog lines?</li>
      </ul>

      <h2>üìö Further Reading & References</h2>
      <ul>
        <li><a href="https://www.voip-info.org/fxs-fxo/" target="_blank" rel="noopener noreferrer">FXS/FXO ‚Äî VoIP-Info.org</a></li>
        <li><a href="https://www.voip-info.org/pri/" target="_blank" rel="noopener noreferrer">Primary Rate Interface (PRI) ‚Äî VoIP-Info.org</a></li>
        <li><a href="https://en.wikipedia.org/wiki/Plain_old_telephone_service" target="_blank" rel="noopener noreferrer">Plain Old Telephone Service (POTS) ‚Äî Wikipedia</a></li>
        <li><a href="https://en.wikipedia.org/wiki/Primary_Rate_Interface" target="_blank" rel="noopener noreferrer">Primary Rate Interface ‚Äî Wikipedia</a></li>
        <li><a href="https://en.wikipedia.org/wiki/T-carrier" target="_blank" rel="noopener noreferrer">T-carrier ‚Äî Wikipedia</a></li>
        <li><a href="https://en.wikipedia.org/wiki/E-carrier" target="_blank" rel="noopener noreferrer">E-carrier ‚Äî Wikipedia</a></li>
        <li><a href="https://www.voip-info.org/ata/" target="_blank" rel="noopener noreferrer">Analog Telephone Adapter (ATA) ‚Äî VoIP-Info.org</a></li>
      </ul>

      <h2>üé• Recommended Videos (Free & Short)</h2>
      <ul>
        <li>‚ÄúFXS vs FXO Explained‚Äù ‚Äî PowerCert Animated Videos ‚Äî <a href="https://www.youtube.com/results?search_query=PowerCert+FXS+FXO" target="_blank" rel="noopener noreferrer">YouTube</a></li>
        <li>‚ÄúAnalog vs VoIP Explained‚Äù ‚Äî <a href="https://www.youtube.com/results?search_query=Analog+vs+VoIP+explained" target="_blank" rel="noopener noreferrer">YouTube</a></li>
        <li>‚ÄúPRI vs SIP Trunking‚Äù ‚Äî <a href="https://www.youtube.com/results?search_query=PRI+vs+SIP+trunking" target="_blank" rel="noopener noreferrer">YouTube</a></li>
      </ul>

      <h2>üßæ Deliverable</h2>
      <ul>
        <li>File: <code>day2_analog_digital_diagrams.png</code> or <code>.pdf</code></li>
        <li>Notes: 3 bullets on when to keep analog, who provides dial tone (FXS vs FXO), and when PRI is preferable to SIP trunking (e.g., legacy constraints, regulatory, last-mile reliability).</li>
        <li>Goal: Visualize analog and digital call paths and when each is used.</li>
      </ul>

      <hr />

      <div class="quiz-controls">
        <button id="start-quiz" type="button">Start Quiz</button>
      </div>
      <div id="quiz" hidden>
        <h2>‚úÖ Quiz ‚Äî Day 2 (20 Questions + Answers)</h2>
        <ol>
          <li>What does an FXS port provide to the attached device?
            <ul><li>Answer: Battery power and dial tone (delivers analog line to the phone).</li></ul>
          </li>
          <li>Which interface would you use to connect a PBX analog card to the PSTN?
            <ul><li>Answer: FXO (receives battery and dial tone from the telco or FXS port).</li></ul>
          </li>
          <li>How many channels are in a T1 vs an E1?
            <ul><li>Answer: T1 has 24 channels (NA); E1 has 32 channels (EU).</li></ul>
          </li>
          <li>What is a trunk in telephony terms?
            <ul><li>Answer: A high-capacity link carrying multiple calls between systems.</li></ul>
          </li>
          <li>Which handles call setup and which carries media: SIP/ISDN vs RTP/TDM?
            <ul><li>Answer: SIP/ISDN handle setup (signaling); RTP/TDM carry the media.</li></ul>
          </li>
          <li>Give one reason sites still keep a few analog lines.
            <ul><li>Answer: Legacy devices (fax, door phones, alarms) or regulatory/emergency fallback.</li></ul>
          </li>
          <li>What modern technology commonly replaced T1/E1 trunks?
            <ul><li>Answer: SIP trunks over IP.</li></ul>
          </li>
          <li>In the visual, which side of the analog connection faces the phone?
            <ul><li>Answer: FXS ‚Üí Phone.</li></ul>
          </li>
          <li>When bridging legacy analog to IP, what device is typically used?
            <ul><li>Answer: An Analog Telephone Adapter (ATA) or a media gateway.</li></ul>
          </li>
          <li>If you need 60 concurrent calls on-prem without SIP, how many T1s are required?
            <ul><li>Answer: Three T1s (3 √ó 24 = 72 channels, allowing for overhead/expansion).</li></ul>
          </li>
          <li>Which side supplies battery and dial tone in an analog pair?
            <ul><li>Answer: FXS supplies; FXO receives.</li></ul>
          </li>
          <li>What are the typical PRI channel counts for T1 and E1?
            <ul><li>Answer: T1: 23B+1D (24 slots). E1: 30B+1D+1 (32 slots).</li></ul>
          </li>
          <li>Which protocol carries signaling on the PRI D-channel?
            <ul><li>Answer: ISDN Q.931 (DSS1).</li></ul>
          </li>
          <li>Name two common causes of PRI link flapping.
            <ul><li>Answer: Framing/CRC mismatches and clocking slips.</li></ul>
          </li>
          <li>On an ATA, what port type connects to an analog phone?
            <ul><li>Answer: FXS port on the ATA.</li></ul>
          </li>
          <li>Preferred method for fax over IP when supported?
            <ul><li>Answer: T.38.</li></ul>
          </li>
          <li>If T.38 is unavailable, which codec is commonly used for fax pass-through?
            <ul><li>Answer: G.711 (¬µ-law or A-law) with stable jitter and packetization.</li></ul>
          </li>
          <li>What does hook-flash enable on some analog devices after IP migration?
            <ul><li>Answer: Features like call transfer or three-way calling via gateway-detected flash.</li></ul>
          </li>
          <li>What should you verify when mapping DIDs to analog ports on a gateway?
            <ul><li>Answer: Correct port-to-extension/DID mapping and inbound routing rules.</li></ul>
          </li>
          <li>Which ITU-T recommendations define E1 framing and physical characteristics?
            <ul><li>Answer: G.704 (framing) and G.703 (physical/electrical).</li></ul>
          </li>
        </ol>
      </div>

      <style>
      .quiz-modal[hidden]{display:none}
      .quiz-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:999}
      .quiz-modal .overlay{position:absolute;inset:0;background:rgba(0,0,0,.55)}
      .quiz-modal .dialog{position:relative;background:var(--panel);border:1px solid #2a323c;border-radius:12px;max-width:640px;width:92%;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.6)}
      .quiz-modal header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
      .quiz-modal header h3{margin:0}
      .quiz-modal .flashcard{background:#0f1318;border:1px solid #2a323c;border-radius:10px;padding:16px;min-height:140px}
      .quiz-modal .label{color:var(--muted);font-size:.9rem;margin-bottom:6px}
      .quiz-modal .text{white-space:pre-wrap}
      .quiz-modal .note{margin-top:10px;width:100%;min-height:80px;background:#0f1318;border:1px solid #2a323c;border-radius:8px;color:var(--text);padding:8px}
      .quiz-modal footer{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}
      .quiz-modal button{background:var(--card);border:1px solid #2a323c;border-radius:10px;padding:8px 12px;color:var(--text)}
      </style>

      <div id="quiz-modal" class="quiz-modal" hidden>
        <div class="overlay" data-close="1"></div>
        <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="quiz-title">
          <header>
            <h3 id="quiz-title">Day 2 ‚Äî Quiz</h3>
            <button id="quiz-close" type="button" aria-label="Close">‚úï</button>
          </header>
          <div class="flashcard">
            <div id="flashcard-label" class="label">Question</div>
            <div id="flashcard-text" class="text"></div>
          </div>
          <textarea id="quiz-note" class="note" placeholder="Optional: jot your answer..."></textarea>
          <footer>
            <button id="quiz-back" type="button">Back</button>
            <button id="quiz-next" type="button">Next</button>
          </footer>
        </div>
      </div>

      <script>
      (function(){
        var quizContainer = document.getElementById('quiz');
        var startBtn = document.getElementById('start-quiz');
        var modal = document.getElementById('quiz-modal');
        var closeBtn = document.getElementById('quiz-close');
        var nextBtn = document.getElementById('quiz-next');
        var backBtn = document.getElementById('quiz-back');
        var labelEl = document.getElementById('flashcard-label');
        var textEl = document.getElementById('flashcard-text');
        var noteEl = document.getElementById('quiz-note');

        if(!quizContainer) return;

        var qa = [];
        var items = quizContainer.querySelectorAll('ol > li');
        items.forEach(function(li){
          var q = '';
          li.childNodes.forEach(function(node){ if(node.nodeType === Node.TEXT_NODE){ q += node.textContent; } });
          q = (q||'').trim().replace(/^\d+\)\s*/, '');
          var aEl = li.querySelector('ul li');
          var a = aEl ? aEl.textContent.replace(/^Answer:\s*/,'').trim() : '';
          if(q){ qa.push({q:q, a:a}); }
        });

        var idx = 0; var showingAnswer = false; var notes = qa.map(function(){return '';});
        function render(){
          if(!qa.length) return;
          var item = qa[idx];
          if(showingAnswer){ labelEl.textContent = 'Answer'; textEl.textContent = item.a || '(No answer provided)'; }
          else { labelEl.textContent = 'Question'; textEl.textContent = item.q; }
          if(noteEl){ noteEl.value = notes[idx] || ''; }
        }
        function openModal(){ idx=0; showingAnswer=false; render(); modal.removeAttribute('hidden'); }
        function closeModal(){ if(noteEl){ notes[idx]=noteEl.value; } modal.setAttribute('hidden',''); }
        function next(){ if(!qa.length) return; if(noteEl){ notes[idx]=noteEl.value; }
          if(!showingAnswer){ showingAnswer=true; render(); } else { showingAnswer=false; idx=(idx+1)%qa.length; render(); } }
        function back(){ if(!qa.length) return; if(noteEl){ notes[idx]=noteEl.value; }
          if(showingAnswer){ showingAnswer=false; render(); } else { idx=(idx-1+qa.length)%qa.length; showingAnswer=false; render(); } }
        if(startBtn) startBtn.addEventListener('click', openModal);
        if(closeBtn) closeBtn.addEventListener('click', closeModal);
        if(nextBtn) nextBtn.addEventListener('click', next);
        if(backBtn) backBtn.addEventListener('click', back);
        modal.addEventListener('click', function(e){ if(e.target && e.target.getAttribute('data-close')) closeModal(); });
        document.addEventListener('keydown', function(e){ if(!modal.hasAttribute('hidden') && e.key==='Escape') closeModal(); });
      })();
      </script>
    </section>
    <footer>
      <nav class="nav-top">
        <a href="./day-01.html">‚Üê Previous</a>
        <a href="./index.html">Back to Week 1</a>
        <a href="./day-03.html">Next ‚Üí</a>
      </nav>
    </footer>
  </main>
</body>
</html>

      <h2>Appendix ‚Äî Deep Dives</h2>

      <h3>Deep Dive: PRI Signaling and Framing (Q.931, G.704)</h3>
      <ul>
        <li><strong>Why it matters:</strong> Correct framing and signaling are essential for stable T1/E1 PRI links during migrations.</li>
        <li><strong>Key details:</strong> D‚Äëchannel carries Q.931 call control (SETUP/CONNECT/RELEASE) for channel allocation. T1: 23B+1D; E1: 30B+1D(+1 framing). Framing/CRC/clocking must match the telco.</li>
        <li><strong>Practical checklist:</strong> Verify line coding, framing, CRC, and switch type; monitor alarms/slips; confirm channel maps.</li>
        <li><strong>References:</strong> <a href="https://www.itu.int/rec/T-REC-Q.931" target="_blank" rel="noopener noreferrer">ITU‚ÄëT Q.931</a>, <a href="https://www.itu.int/rec/T-REC-G.704" target="_blank" rel="noopener noreferrer">ITU‚ÄëT G.704</a>, <a href="https://www.itu.int/rec/T-REC-G.703" target="_blank" rel="noopener noreferrer">ITU‚ÄëT G.703</a></li>
      </ul>

      <h3>Deep Dive: Fax over IP ‚Äî T.38 vs G.711 Pass‚ÄëThrough</h3>
      <ul>
        <li><strong>Why it matters:</strong> Fax reliability depends on choosing the right transport over lossy IP links.</li>
        <li><strong>Key details:</strong> T.38 relays fax data, avoiding PCM impairments; G.711 pass‚Äëthrough can work on clean networks; sensitive to jitter/loss/ptime. Interop: negotiate per call; some gateways can switch to T.38 mid‚Äëcall on CED/ANS detection.</li>
        <li><strong>Practical checklist:</strong> Prefer T.38 when available; otherwise use G.711 ¬µ/A‚Äëlaw, stable jitter buffers, 20 ms <code>ptime</code>.</li>
        <li><strong>References:</strong> <a href="https://www.itu.int/rec/T-REC-T.38/en" target="_blank" rel="noopener noreferrer">ITU‚ÄëT T.38</a>, <a href="https://wiki.asterisk.org/wiki/display/AST/T.38+Gateway" target="_blank" rel="noopener noreferrer">Asterisk T.38 Gateway</a></li>
      </ul>

      <h3>Deep Dive: Analog Caller ID Signaling (FSK vs DTMF)</h3>
      <ul>
        <li><strong>Why it matters:</strong> CID delivery differences impact ATAs/gateway configs across regions.</li>
        <li><strong>Key details:</strong> Many regions use Bellcore/ETSI FSK between first/second ring; others use DTMF post‚Äëring. Timing/leveling and polarity can affect decode success; configure per locale.</li>
        <li><strong>Practical checklist:</strong> Set country profile on ATAs; test CID with local carriers and adjust timing.</li>
        <li><strong>References:</strong> <a href="https://www.etsi.org/deliver/etsi_en/300600_300699/30065901/01.03.01_60/en_30065901v010301p.pdf" target="_blank" rel="noopener noreferrer">ETSI EN 300 659</a></li>
      </ul>

